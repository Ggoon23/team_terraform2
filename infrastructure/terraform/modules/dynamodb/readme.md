# ğŸ—ï¸ Infrastructure Modules

**Terraform ê¸°ë°˜ AWS ì¸í”„ë¼ ë³´ì•ˆ ìë™í™” ë° Splunk í†µí•© ë³´ì•ˆ ëª¨ë‹ˆí„°ë§ í”Œë«í¼**

## ğŸ“‹ ëª¨ë“ˆ êµ¬ì„±

| ëª¨ë“ˆ | ëª©ì  | í•µì‹¬ ê¸°ëŠ¥ | ISMS-P |
|------|------|-----------|---------|
| **ğŸŒ VPC** | ë„¤íŠ¸ì›Œí¬ ê²©ë¦¬ | Multi-AZ, Flow Logs, 3-Tier | âœ… |
| **ğŸ—ƒï¸ RDS** | ê´€ê³„í˜• DB | ì•”í˜¸í™”, Multi-AZ, ë°±ì—… | âœ… |
| **â˜¸ï¸ EKS** | ì»¨í…Œì´ë„ˆ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ | ì‹œí¬ë¦¿ ì•”í˜¸í™”, RBAC, ë¡œê¹… | âœ… |
| **ğŸ—‚ï¸ S3** | ê°ì²´ ìŠ¤í† ë¦¬ì§€ | KMS ì•”í˜¸í™”, ë¼ì´í”„ì‚¬ì´í´, ë¡œê¹… | âœ… |
| **ğŸ—„ï¸ DynamoDB** | NoSQL DB | PITR, ìŠ¤íŠ¸ë¦¼, Auto Scaling | âœ… |

## ğŸš€ ë¹ ë¥¸ ì‹œì‘

```bash
# 1. ë³€ìˆ˜ ì„¤ì •
cp terraform.tfvars.example terraform.tfvars
vim terraform.tfvars

# 2. ì´ˆê¸°í™” ë° ë°°í¬
terraform init
terraform plan
terraform apply
```

## ğŸ”’ ë³´ì•ˆ íŠ¹ì§•

### **ì•”í˜¸í™” (Encryption at Rest/Transit)**
- ëª¨ë“  ë°ì´í„° KMS ì•”í˜¸í™”
- TLS 1.2+ ê°•ì œ ì ìš©
- ì‹œí¬ë¦¿ ìë™ ë¡œí…Œì´ì…˜

### **ì ‘ê·¼ ì œì–´ (IAM & RBAC)**
- ìµœì†Œ ê¶Œí•œ ì›ì¹™
- MFA ê°•ì œ ì ìš©
- ì„¸ì…˜ í† í° ê¸°ë°˜ ì¸ì¦

### **ëª¨ë‹ˆí„°ë§ (Comprehensive Logging)**
- CloudTrail: API í˜¸ì¶œ ê¸°ë¡
- VPC Flow Logs: ë„¤íŠ¸ì›Œí¬ íŠ¸ë˜í”½
- GuardDuty: ìœ„í˜‘ íƒì§€
- Config: ì„¤ì • ë³€ê²½ ì¶”ì 

## ğŸ“Š ISMS-P ì»´í”Œë¼ì´ì–¸ìŠ¤

| í•­ëª© | ìš”êµ¬ì‚¬í•­ | êµ¬í˜„ |
|------|----------|------|
| **2.7.1** | ì•”í˜¸ì •ì±… ì ìš© | KMS, TLS 1.2+ |
| **2.9.4** | ë¡œê·¸ ê´€ë¦¬ | 365ì¼+ ë³´ê´€ |
| **2.5.1** | ê³„ì • ê´€ë¦¬ | IAM, RBAC |
| **2.6.1** | ë„¤íŠ¸ì›Œí¬ ì ‘ê·¼ | Security Groups, NACLs |

## ğŸ—ï¸ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        VPC                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚   Public    â”‚  â”‚   Private   â”‚  â”‚  Database   â”‚     â”‚
â”‚  â”‚   Subnet    â”‚  â”‚   Subnet    â”‚  â”‚   Subnet    â”‚     â”‚
â”‚  â”‚             â”‚  â”‚             â”‚  â”‚             â”‚     â”‚
â”‚  â”‚    ALB      â”‚  â”‚    EKS      â”‚  â”‚    RDS      â”‚     â”‚
â”‚  â”‚             â”‚  â”‚  Workers    â”‚  â”‚ DynamoDB    â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚      S3     â”‚
                    â”‚    Logs     â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚    Splunk   â”‚
                    â”‚  Universal  â”‚
                    â”‚  Forwarder  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“ íŒŒì¼ êµ¬ì¡°

```
infrastructure/terraform/
â”œâ”€â”€ modules/
â”‚   â”œâ”€â”€ vpc/         # ë„¤íŠ¸ì›Œí¬ ê¸°ë°˜
â”‚   â”œâ”€â”€ rds/         # ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤
â”‚   â”œâ”€â”€ eks/         # Kubernetes í´ëŸ¬ìŠ¤í„°
â”‚   â”œâ”€â”€ s3/          # ê°ì²´ ìŠ¤í† ë¦¬ì§€
â”‚   â””â”€â”€ dynamodb/    # NoSQL ë°ì´í„°ë² ì´ìŠ¤
â””â”€â”€ environments/
    â”œâ”€â”€ dev/         # ê°œë°œ í™˜ê²½
    â”œâ”€â”€ staging/     # ìŠ¤í…Œì´ì§• í™˜ê²½
    â””â”€â”€ prod/        # ìš´ì˜ í™˜ê²½
```

## âš™ï¸ ë³€ìˆ˜ ì˜ˆì‹œ

```hcl
# terraform.tfvars
project_name = "security-monitoring"
environment  = "prod"

# VPC ì„¤ì •
vpc_cidr = "10.0.0.0/16"
availability_zones = ["ap-northeast-2a", "ap-northeast-2c"]

# ë³´ì•ˆ ì„¤ì •
enable_deletion_protection = true
log_retention_days = 365
create_kms_keys = true

# íƒœê·¸
common_tags = {
  Project     = "Security-Monitoring"
  Environment = "Production"
  Team        = "Team2"
  Owner       = "Infrastructure"
}
```

## ğŸ” ì£¼ìš” ì¶œë ¥ê°’

```bash
# VPC ì •ë³´
terraform output vpc_id
terraform output private_subnet_ids

# ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì •ë³´  
terraform output rds_endpoint
terraform output dynamodb_table_name

# ë³´ì•ˆ ì •ë³´
terraform output kms_key_arns
terraform output s3_log_bucket
```

## ğŸ“ˆ ëª¨ë‹ˆí„°ë§ ëŒ€ì‹œë³´ë“œ

### **CloudWatch ë©”íŠ¸ë¦­**
- EC2/EKS: CPU, ë©”ëª¨ë¦¬, ë„¤íŠ¸ì›Œí¬
- RDS: ì—°ê²°, ì¿¼ë¦¬ ì„±ëŠ¥, ë³µì œ ì§€ì—°
- DynamoDB: ì½ê¸°/ì“°ê¸° ìš©ëŸ‰, ìŠ¤ë¡œí‹€ë§

### **Splunk ì—°ë™**
- ì‹¤ì‹œê°„ ë¡œê·¸ ìˆ˜ì§‘
- ë³´ì•ˆ ì´ë²¤íŠ¸ ìƒê´€ë¶„ì„  
- ISMS-P ì»´í”Œë¼ì´ì–¸ìŠ¤ ë¦¬í¬íŠ¸

## ğŸ› ï¸ ìš´ì˜ ê°€ì´ë“œ

### **ë°±ì—… ì •ì±…**
- RDS: 7ì¼ ìë™ ë°±ì—…
- DynamoDB: PITR 35ì¼
- S3: ë²„ì „ ê´€ë¦¬ + ë¼ì´í”„ì‚¬ì´í´

### **ì¬í•´ ë³µêµ¬**
- Multi-AZ ë°°í¬
- Cross-Region ë³µì œ
- ìë™ ì¥ì•  ì¡°ì¹˜

### **ë¹„ìš© ìµœì í™”**
- Reserved Instances
- Spot Instances (ê°œë°œí™˜ê²½)
- S3 Intelligent Tiering
- DynamoDB On-Demand

## ğŸš¨ ì£¼ì˜ì‚¬í•­

âš ï¸ **ìš´ì˜ í™˜ê²½ ë°°í¬ ì „ í•„ìˆ˜ í™•ì¸**
- [ ] KMS í‚¤ ë°±ì—…
- [ ] IAM ê¶Œí•œ ê²€í† 
- [ ] ë„¤íŠ¸ì›Œí¬ ACL í™•ì¸
- [ ] ë°±ì—… ì •ì±… í…ŒìŠ¤íŠ¸

## ğŸ¤ ê¸°ì—¬ ê°€ì´ë“œ

1. Feature ë¸Œëœì¹˜ ìƒì„±
2. Terraform validate/plan ì‹¤í–‰
3. ë³´ì•ˆ ìŠ¤ìº” (checkov, tfsec)
4. Pull Request ìƒì„±

---
**ğŸ“§ Contact**: Team2 Infrastructure  
**ğŸ”— Documentation**: [Confluence Link]  
**ğŸ¯ JIRA**: [Project Board]